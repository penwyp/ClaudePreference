# m-test-generation - è‡ªåŠ¨åŒ–æµ‹è¯•ç”Ÿæˆå·¥ä½œæµ

## æ¦‚è¿°

`m-test-generation` æ˜¯ä¸€ä¸ªæ™ºèƒ½çš„æµ‹è¯•ç”Ÿæˆå·¥å…·ï¼Œèƒ½å¤Ÿè‡ªåŠ¨åˆ›å»ºå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•ã€‚è¯¥å‘½ä»¤åˆ†æä»£ç è¦†ç›–ç‡ã€è¯†åˆ«æµ‹è¯•ç¼ºå£ï¼Œå¹¶ç”Ÿæˆå…¨é¢çš„æµ‹è¯•ç”¨ä¾‹ä»¥ç¡®ä¿ä»£ç è´¨é‡å’Œç¨³å®šæ€§ã€‚

## ä½¿ç”¨æ–¹æ³•

```bash
/m-test-generation [type] [target] [coverage]
```

## å‚æ•°è¯¦è§£

- `type` (å¯é€‰): æµ‹è¯•ç±»å‹
  - `unit` - å•å…ƒæµ‹è¯•
  - `integration` - é›†æˆæµ‹è¯•
  - `e2e` - ç«¯åˆ°ç«¯æµ‹è¯•
  - `all` - æ‰€æœ‰ç±»å‹æµ‹è¯•
- `target` (å¯é€‰): æµ‹è¯•ç›®æ ‡
  - æ–‡ä»¶è·¯å¾„: `src/auth`, `components/`
  - ç»„ä»¶å: `UserService`, `LoginComponent`
  - åŠŸèƒ½æ¨¡å—: `auth`, `payment`, `user-flow`
- `coverage` (å¯é€‰): è¦†ç›–ç‡ç›®æ ‡
  - ç™¾åˆ†æ¯”: `90%`, `85%`, `100%`
  - é»˜è®¤å€¼: `80%`

## ä½¿ç”¨ç¤ºä¾‹

### é»˜è®¤æµ‹è¯•ç”Ÿæˆ
```bash
/m-test-generation
```
**é¢„æœŸç»“æœ**: 
- åˆ†ææœ€è¿‘ä¿®æ”¹çš„æ–‡ä»¶
- ç”Ÿæˆå•å…ƒæµ‹è¯•
- ç›®æ ‡è¦†ç›–ç‡80%
- è¯†åˆ«æµ‹è¯•ç¼ºå£

### å•å…ƒæµ‹è¯•ç”Ÿæˆ
```bash
/m-test-generation unit src/auth 90%
```
**é¢„æœŸç»“æœ**: 
- ä¸º `src/auth` ç›®å½•ç”Ÿæˆå•å…ƒæµ‹è¯•
- ç›®æ ‡è¦†ç›–ç‡90%
- åˆ›å»ºæµ‹è¯•æ–‡ä»¶å’Œç”¨ä¾‹
- è¿è¡Œæµ‹è¯•éªŒè¯åŠŸèƒ½

### é›†æˆæµ‹è¯•ç”Ÿæˆ
```bash
/m-test-generation integration api
```
**é¢„æœŸç»“æœ**: 
- ä¸ºAPIæ¨¡å—ç”Ÿæˆé›†æˆæµ‹è¯•
- æµ‹è¯•ç»„ä»¶é—´äº¤äº’
- éªŒè¯å·¥ä½œæµç¨‹
- åˆ›å»ºæµ‹è¯•æ•°æ®å’Œç¯å¢ƒ

### ç«¯åˆ°ç«¯æµ‹è¯•ç”Ÿæˆ
```bash
/m-test-generation e2e user-flow
```
**é¢„æœŸç»“æœ**: 
- ç”Ÿæˆç”¨æˆ·æµç¨‹çš„ç«¯åˆ°ç«¯æµ‹è¯•
- æ¨¡æ‹ŸçœŸå®ç”¨æˆ·æ“ä½œ
- éªŒè¯å®Œæ•´ä¸šåŠ¡æµç¨‹
- åˆ›å»ºæµ‹è¯•åœºæ™¯å’Œæ•°æ®

### å…¨é¢æµ‹è¯•ç”Ÿæˆ
```bash
/m-test-generation all components 85%
```
**é¢„æœŸç»“æœ**: 
- ä¸ºæ‰€æœ‰ç»„ä»¶ç”Ÿæˆæ‰€æœ‰ç±»å‹æµ‹è¯•
- ç›®æ ‡è¦†ç›–ç‡85%
- åˆ›å»ºæµ‹è¯•å¥—ä»¶
- å»ºç«‹æµ‹è¯•åŸºç¡€è®¾æ–½

## å·¥ä½œæµç¨‹

### 1. ä»£ç è¦†ç›–ç‡åˆ†æ
- **å½“å‰è¦†ç›–ç‡**: åˆ†æç°æœ‰æµ‹è¯•çš„è¦†ç›–æƒ…å†µ
- **ç¼ºå£è¯†åˆ«**: æ‰¾å‡ºæœªæµ‹è¯•çš„å‡½æ•°å’Œä»£ç è·¯å¾„
- **é£é™©è¯„ä¼°**: è¯„ä¼°æœªè¦†ç›–ä»£ç çš„é£é™©ç­‰çº§
- **ä¼˜å…ˆçº§æ’åº**: æŒ‰é‡è¦æ€§æ’åºæµ‹è¯•éœ€æ±‚

### 2. å•å…ƒæµ‹è¯•ç”Ÿæˆ
- **å‡½æ•°åˆ†æ**: åˆ†ææ¯ä¸ªå‡½æ•°çš„è¾“å…¥è¾“å‡º
- **è¾¹ç•Œæµ‹è¯•**: åˆ›å»ºè¾¹ç•Œæ¡ä»¶æµ‹è¯•ç”¨ä¾‹
- **å¼‚å¸¸æµ‹è¯•**: ç”Ÿæˆå¼‚å¸¸æƒ…å†µæµ‹è¯•
- **Mockåˆ›å»º**: åˆ›å»ºå¿…è¦çš„Mockå¯¹è±¡

### 3. é›†æˆæµ‹è¯•åˆ›å»º
- **ç»„ä»¶äº¤äº’**: æµ‹è¯•æ¨¡å—é—´çš„äº¤äº’
- **æ•°æ®æµæµ‹è¯•**: éªŒè¯æ•°æ®åœ¨ç»„ä»¶é—´çš„æµåŠ¨
- **å·¥ä½œæµéªŒè¯**: æµ‹è¯•å®Œæ•´çš„ä¸šåŠ¡æµç¨‹
- **é…ç½®æµ‹è¯•**: éªŒè¯ä¸åŒé…ç½®ä¸‹çš„è¡Œä¸º

### 4. ç«¯åˆ°ç«¯æµ‹è¯•æ„å»º
- **ç”¨æˆ·åœºæ™¯**: æ¨¡æ‹ŸçœŸå®ç”¨æˆ·æ“ä½œ
- **æµè§ˆå™¨æµ‹è¯•**: è·¨æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•
- **æ€§èƒ½æµ‹è¯•**: æµ‹è¯•ç³»ç»Ÿæ€§èƒ½å’Œå“åº”æ—¶é—´
- **å›å½’æµ‹è¯•**: ç¡®ä¿æ–°åŠŸèƒ½ä¸ç ´åç°æœ‰åŠŸèƒ½

### 5. æµ‹è¯•å¥—ä»¶æ‰§è¡Œ
- **å¹¶è¡Œæ‰§è¡Œ**: ä¼˜åŒ–æµ‹è¯•æ‰§è¡Œæ—¶é—´
- **ç»“æœåˆ†æ**: åˆ†ææµ‹è¯•ç»“æœå’Œå¤±è´¥åŸå› 
- **æŠ¥å‘Šç”Ÿæˆ**: ç”Ÿæˆè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Š
- **è¦†ç›–ç‡éªŒè¯**: éªŒè¯æ˜¯å¦è¾¾åˆ°ç›®æ ‡è¦†ç›–ç‡

## æµ‹è¯•ç±»å‹è¯¦è§£

### å•å…ƒæµ‹è¯• (Unit Tests)
**ç‰¹ç‚¹**: 
- æµ‹è¯•å•ä¸ªå‡½æ•°æˆ–æ–¹æ³•
- å¿«é€Ÿæ‰§è¡Œ
- éš”ç¦»ä¾èµ–
- é«˜è¦†ç›–ç‡

**ç”Ÿæˆå†…å®¹**:
```javascript
// ç¤ºä¾‹: UserService.test.js
describe('UserService', () => {
  describe('validateEmail', () => {
    it('should return true for valid email', () => {
      const result = UserService.validateEmail('test@example.com');
      expect(result).toBe(true);
    });

    it('should return false for invalid email', () => {
      const result = UserService.validateEmail('invalid-email');
      expect(result).toBe(false);
    });

    it('should handle null input', () => {
      const result = UserService.validateEmail(null);
      expect(result).toBe(false);
    });
  });
});
```

### é›†æˆæµ‹è¯• (Integration Tests)
**ç‰¹ç‚¹**:
- æµ‹è¯•æ¨¡å—é—´äº¤äº’
- éªŒè¯æ•°æ®æµ
- æµ‹è¯•APIç«¯ç‚¹
- æ£€æŸ¥é…ç½®

**ç”Ÿæˆå†…å®¹**:
```javascript
// ç¤ºä¾‹: AuthIntegration.test.js
describe('Authentication Integration', () => {
  it('should complete full login flow', async () => {
    const loginData = { email: 'test@example.com', password: 'password' };
    const response = await request(app)
      .post('/api/auth/login')
      .send(loginData);
    
    expect(response.status).toBe(200);
    expect(response.body.token).toBeDefined();
  });
});
```

### ç«¯åˆ°ç«¯æµ‹è¯• (E2E Tests)
**ç‰¹ç‚¹**:
- æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸º
- è·¨æµè§ˆå™¨æµ‹è¯•
- å®Œæ•´ä¸šåŠ¡æµç¨‹
- æ€§èƒ½éªŒè¯

**ç”Ÿæˆå†…å®¹**:
```javascript
// ç¤ºä¾‹: UserFlow.e2e.js
describe('User Registration Flow', () => {
  it('should allow user to register and login', async () => {
    await page.goto('/register');
    await page.fill('[data-testid="email"]', 'test@example.com');
    await page.fill('[data-testid="password"]', 'password123');
    await page.click('[data-testid="submit"]');
    
    await expect(page).toHaveURL('/dashboard');
  });
});
```

## é¢„æœŸç»“æœ

### æµ‹è¯•ç”ŸæˆæŠ¥å‘Š
```
ğŸ§ª æµ‹è¯•ç”ŸæˆæŠ¥å‘Š
ç”Ÿæˆæ—¶é—´: 2025-01-15 14:30:00
ç›®æ ‡: src/auth ç›®å½•
æµ‹è¯•ç±»å‹: å•å…ƒæµ‹è¯•
è¦†ç›–ç‡ç›®æ ‡: 90%

ğŸ“Š è¦†ç›–ç‡åˆ†æ
  - å½“å‰è¦†ç›–ç‡: 65%
  - ç›®æ ‡è¦†ç›–ç‡: 90%
  - æå‡éœ€æ±‚: 25%
  - æœªè¦†ç›–å‡½æ•°: 12ä¸ª

ğŸ”§ ç”Ÿæˆçš„æµ‹è¯•æ–‡ä»¶
  1. UserService.test.js (15ä¸ªæµ‹è¯•ç”¨ä¾‹)
  2. AuthMiddleware.test.js (8ä¸ªæµ‹è¯•ç”¨ä¾‹)
  3. PasswordValidator.test.js (12ä¸ªæµ‹è¯•ç”¨ä¾‹)
  4. TokenManager.test.js (10ä¸ªæµ‹è¯•ç”¨ä¾‹)

âœ… æµ‹è¯•æ‰§è¡Œç»“æœ
  - æ€»æµ‹è¯•æ•°: 45
  - é€šè¿‡: 42
  - å¤±è´¥: 3
  - è·³è¿‡: 0
  - æ‰§è¡Œæ—¶é—´: 2.3ç§’

ğŸ“ˆ è¦†ç›–ç‡è¾¾æˆ
  - è¡Œè¦†ç›–ç‡: 92%
  - å‡½æ•°è¦†ç›–ç‡: 89%
  - åˆ†æ”¯è¦†ç›–ç‡: 87%
  - è¯­å¥è¦†ç›–ç‡: 91%

ğŸš¨ éœ€è¦å…³æ³¨çš„é—®é¢˜
  1. AuthMiddleware.validateToken() å¼‚å¸¸å¤„ç†è¦†ç›–ä¸è¶³
  2. PasswordValidator.checkComplexity() è¾¹ç•Œæ¡ä»¶æµ‹è¯•ç¼ºå¤±
  3. TokenManager.refreshToken() å¹¶å‘åœºæ™¯æœªæµ‹è¯•
```

### æµ‹è¯•æ–‡ä»¶ç»“æ„
```
tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ UserService.test.js
â”‚   â”‚   â””â”€â”€ AuthService.test.js
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ PasswordValidator.test.js
â”‚   â””â”€â”€ middleware/
â”‚       â””â”€â”€ AuthMiddleware.test.js
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ authRoutes.test.js
â”‚   â”‚   â””â”€â”€ userRoutes.test.js
â”‚   â””â”€â”€ database/
â”‚       â””â”€â”€ userRepository.test.js
â””â”€â”€ e2e/
    â”œâ”€â”€ userFlow.test.js
    â””â”€â”€ authFlow.test.js
```

## æµ‹è¯•æ¡†æ¶æ”¯æŒ

### JavaScript/TypeScript
- **Jest**: å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- **Mocha + Chai**: çµæ´»çš„æµ‹è¯•æ¡†æ¶
- **Playwright**: ç«¯åˆ°ç«¯æµ‹è¯•
- **Cypress**: ç°ä»£ç«¯åˆ°ç«¯æµ‹è¯•

### Python
- **pytest**: å…¨åŠŸèƒ½æµ‹è¯•æ¡†æ¶
- **unittest**: æ ‡å‡†åº“æµ‹è¯•æ¡†æ¶
- **Selenium**: Webè‡ªåŠ¨åŒ–æµ‹è¯•
- **FastAPI TestClient**: APIæµ‹è¯•

### Java
- **JUnit**: æ ‡å‡†å•å…ƒæµ‹è¯•æ¡†æ¶
- **TestNG**: çµæ´»çš„æµ‹è¯•æ¡†æ¶
- **Mockito**: Mockå¯¹è±¡æ¡†æ¶
- **Spring Boot Test**: é›†æˆæµ‹è¯•

### Go
- **go test**: å†…ç½®æµ‹è¯•æ¡†æ¶
- **Testify**: å¢å¼ºæµ‹è¯•åº“
- **Ginkgo**: BDDæµ‹è¯•æ¡†æ¶
- **GoConvey**: Webç•Œé¢æµ‹è¯•

## æœ€ä½³å®è·µ

### 1. æµ‹è¯•è®¾è®¡åŸåˆ™
- **FIRSTåŸåˆ™**: Fast, Independent, Repeatable, Self-Validating, Timely
- **AAAæ¨¡å¼**: Arrange, Act, Assert
- **å•ä¸€èŒè´£**: æ¯ä¸ªæµ‹è¯•åªéªŒè¯ä¸€ä¸ªè¡Œä¸º
- **æè¿°æ€§å‘½å**: æµ‹è¯•åç§°åº”è¯¥æ¸…æ™°æè¿°è¢«æµ‹è¯•çš„è¡Œä¸º

### 2. æµ‹è¯•æ•°æ®ç®¡ç†
- **æµ‹è¯•æ•°æ®éš”ç¦»**: æ¯ä¸ªæµ‹è¯•ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®
- **æ•°æ®æ¸…ç†**: æµ‹è¯•åæ¸…ç†æµ‹è¯•æ•°æ®
- **Factoryæ¨¡å¼**: ä½¿ç”¨å·¥å‚æ–¹æ³•åˆ›å»ºæµ‹è¯•æ•°æ®
- **Mockç­–ç•¥**: åˆç†ä½¿ç”¨Mockå¯¹è±¡

### 3. æµ‹è¯•ç»´æŠ¤
- **å®šæœŸé‡æ„**: ä¿æŒæµ‹è¯•ä»£ç çš„è´¨é‡
- **å¹¶è¡Œæ‰§è¡Œ**: ä¼˜åŒ–æµ‹è¯•æ‰§è¡Œæ—¶é—´
- **å¤±è´¥åˆ†æ**: å¿«é€Ÿå®šä½å’Œä¿®å¤å¤±è´¥çš„æµ‹è¯•
- **è¦†ç›–ç‡ç›‘æ§**: æŒç»­ç›‘æ§æµ‹è¯•è¦†ç›–ç‡

## é”™è¯¯å¤„ç†

### å¸¸è§é—®é¢˜
- **æµ‹è¯•å¤±è´¥**: åˆ†æå¤±è´¥åŸå› å¹¶ä¿®å¤
- **è¦†ç›–ç‡ä¸è¶³**: è¯†åˆ«æœªè¦†ç›–çš„ä»£ç è·¯å¾„
- **æ‰§è¡Œç¼“æ…¢**: ä¼˜åŒ–æµ‹è¯•æ‰§è¡Œæ€§èƒ½
- **ç¯å¢ƒä¾èµ–**: è§£å†³æµ‹è¯•ç¯å¢ƒé—®é¢˜

### æ•…éšœæ’é™¤
```
âŒ æµ‹è¯•ç”Ÿæˆå¤±è´¥
åŸå› : æ— æ³•è§£æä»£ç ç»“æ„
è§£å†³: æ£€æŸ¥ä»£ç è¯­æ³•å’Œå¯¼å…¥è¯­å¥

âš ï¸ è¦†ç›–ç‡ä½äºç›®æ ‡
åŸå› : å¤æ‚é€»è¾‘åˆ†æ”¯æœªå®Œå…¨è¦†ç›–
è§£å†³: å¢åŠ è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æµ‹è¯•

ğŸ› æµ‹è¯•ä¸ç¨³å®š
åŸå› : å¼‚æ­¥æ“ä½œå’Œæ—¶é—´ä¾èµ–
è§£å†³: ä½¿ç”¨Mockå’Œå›ºå®šæ—¶é—´
```

## ç›¸å…³å‘½ä»¤

- [`m-tdd-planner`](m-tdd-planner.md) - TDDè§„åˆ’
- [`m-review-code`](m-review-code.md) - ä»£ç å®¡æŸ¥
- [`m-bug-fix`](m-bug-fix.md) - Bugä¿®å¤
- [`m-security-scan`](m-security-scan.md) - å®‰å…¨æµ‹è¯•